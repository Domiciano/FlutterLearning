<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirigiendo...</title>
    <script type="text/javascript">
      // Define la base de tu repositorio en GitHub Pages.
      // ¡Es crucial que sea el nombre EXACTO de tu repositorio!
      var repoBase = "/FlutterLearning";

      // Obtiene el pathname completo que causó el 404, ej. /FlutterLearning/lesson/1
      var currentPathname = window.location.pathname;

      // Extrae la parte de la ruta que React Router debe manejar.
      // Esto significa remover el `repoBase` del inicio del `currentPathname`.
      var reactRouterPath = currentPathname;
      if (reactRouterPath.startsWith(repoBase)) {
        reactRouterPath = reactRouterPath.substring(repoBase.length);
      }

      // Asegurarse de que la ruta final para React Router comience con una barra.
      if (!reactRouterPath.startsWith('/')) {
        reactRouterPath = '/' + reactRouterPath;
      }

      // Construye la URL final para la redirección.
      // Será: "/FlutterLearning/index.html?p=/lesson/1" (o cualquier otra ruta)
      // Usamos encodeURIComponent para asegurar que la ruta se pase correctamente.
      var finalRedirectUrl = repoBase + "/index.html?p=" + encodeURIComponent(reactRouterPath);

      // Comprueba si la URL actual del navegador ya es la URL de redirección final
      // o si ya contiene el parámetro 'p' para evitar bucles.
      // Esto es para casos donde el script se ejecuta más de una vez.
      if (window.location.href.indexOf("?p=") === -1 || // Si no tiene ?p=, redirige.
          decodeURIComponent(window.location.search.substring(3)) !== reactRouterPath) { // O si el path en ?p= es diferente.
          
          window.location.replace(finalRedirectUrl);
      }
      // Si ya tiene ?p= y el path coincide, significa que index.html ya se cargó,
      // y App.jsx se encargará de la navegación interna.
    </script>
  </head>
  <body></body>
</html>